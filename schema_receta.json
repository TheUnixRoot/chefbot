{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://kuzco.local/schemas/receta.json",
  "title": "Esquema de Receta",
  "description": "Esquema JSON para validar archivos de recetas en el proyecto Kuzco",
  "type": "object",
  "properties": {
    "titulo": {
      "type": "string",
      "description": "Nombre de la receta",
      "minLength": 1,
      "maxLength": 100
    },
    "descripcion": {
      "type": "string",
      "description": "Descripción breve de la receta",
      "minLength": 10,
      "maxLength": 500
    },
    "tiempo_preparacion": {
      "type": "string",
      "description": "Tiempo estimado de preparación (ej: '45 minutos', '1 hora 30 minutos')",
      "pattern": "^\\d+\\s+(minuto|minutos|hora|horas)(\\s+\\d+\\s+(minuto|minutos))?$"
    },
    "dificultad": {
      "type": "string",
      "description": "Nivel de dificultad de la receta",
      "enum": ["Muy fácil", "Fácil", "Intermedio", "Difícil", "Muy difícil"]
    },
    "porciones": {
      "type": "integer",
      "description": "Número de porciones que rinde la receta",
      "minimum": 1,
      "maximum": 50
    },
    "calorias_por_porcion": {
      "type": "integer",
      "description": "Calorías aproximadas por porción",
      "minimum": 0,
      "maximum": 2000
    },
    "ingredientes": {
      "type": "array",
      "description": "Lista de ingredientes necesarios",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "nombre": {
            "type": "string",
            "description": "Nombre del ingrediente",
            "minLength": 1,
            "maxLength": 100
          },
          "cantidad": {
            "type": "string",
            "description": "Cantidad necesaria del ingrediente (ej: '500 g', '2 tazas', '1 cucharada')",
            "minLength": 1,
            "maxLength": 50
          },
          "opcional": {
            "type": "boolean",
            "description": "Indica si el ingrediente es opcional",
            "default": false
          },
          "notas": {
            "type": "string",
            "description": "Notas adicionales sobre el ingrediente (ej: 'a temperatura ambiente')",
            "maxLength": 200
          }
        },
        "required": ["nombre", "cantidad"],
        "additionalProperties": false
      }
    },
    "pasos": {
      "type": "array",
      "description": "Pasos detallados para preparar la receta",
      "minItems": 1,
      "items": {
        "type": "string",
        "description": "Descripción de cada paso",
        "minLength": 10,
        "maxLength": 1000
      }
    },
    "tags": {
      "type": "array",
      "description": "Etiquetas para categorizar y buscar la receta",
      "items": {
        "type": "string",
        "minLength": 2,
        "maxLength": 30,
        "pattern": "^[a-záéíóúñü\\s]+$"
      },
      "uniqueItems": true,
      "maxItems": 20
    },
    "categoria": {
      "type": "string",
      "description": "Categoría principal de la receta",
      "enum": [
        "Desayuno",
        "Almuerzo", 
        "Cena",
        "Aperitivo",
        "Postre",
        "Bebida",
        "Salsa",
        "Guarnición",
        "Snack",
        "Panadería",
        "Repostería"
      ]
    },
    "origen": {
      "type": "string",
      "description": "País o región de origen de la receta",
      "maxLength": 50
    },
    "tipo_cocina": {
      "type": "array",
      "description": "Tipos de cocina (ej: italiana, mexicana, vegana, sin gluten)",
      "items": {
        "type": "string",
        "maxLength": 30
      },
      "uniqueItems": true,
      "maxItems": 10
    },
    "temporada": {
      "type": "array",
      "description": "Temporadas recomendadas para la receta",
      "items": {
        "type": "string",
        "enum": ["Primavera", "Verano", "Otoño", "Invierno"]
      },
      "uniqueItems": true
    },
    "equipo_necesario": {
      "type": "array",
      "description": "Equipos de cocina necesarios",
      "items": {
        "type": "string",
        "maxLength": 50
      },
      "uniqueItems": true,
      "maxItems": 15
    },
    "consejos": {
      "type": "array",
      "description": "Consejos útiles para la preparación",
      "items": {
        "type": "string",
        "minLength": 10,
        "maxLength": 300
      },
      "maxItems": 10
    },
    "variaciones": {
      "type": "array",
      "description": "Variaciones posibles de la receta",
      "items": {
        "type": "string",
        "minLength": 10,
        "maxLength": 300
      },
      "maxItems": 10
    },
    "informacion_nutricional": {
      "type": "object",
      "description": "Información nutricional por porción",
      "properties": {
        "calorias": {
          "type": "integer",
          "minimum": 0,
          "maximum": 2000
        },
        "proteinas": {
          "type": "number",
          "description": "Gramos de proteína",
          "minimum": 0
        },
        "carbohidratos": {
          "type": "number",
          "description": "Gramos de carbohidratos",
          "minimum": 0
        },
        "grasas": {
          "type": "number",
          "description": "Gramos de grasas",
          "minimum": 0
        },
        "fibra": {
          "type": "number",
          "description": "Gramos de fibra",
          "minimum": 0
        },
        "sodio": {
          "type": "number",
          "description": "Miligramos de sodio",
          "minimum": 0
        }
      },
      "additionalProperties": false
    },
    "fecha_creacion": {
      "type": "string",
      "description": "Fecha de creación de la receta",
      "format": "date"
    },
    "fecha_actualizacion": {
      "type": "string",
      "description": "Fecha de última actualización",
      "format": "date"
    },
    "autor": {
      "type": "string",
      "description": "Autor de la receta",
      "maxLength": 100
    },
    "fuente": {
      "type": "string",
      "description": "Fuente original de la receta (URL, libro, etc.)",
      "maxLength": 200
    },
    "valoracion": {
      "type": "number",
      "description": "Valoración de la receta (1-5 estrellas)",
      "minimum": 1,
      "maximum": 5
    },
    "imagen": {
      "type": "string",
      "description": "Ruta o URL de la imagen de la receta",
      "format": "uri"
    }
  },
  "required": [
    "titulo",
    "descripcion",
    "tiempo_preparacion",
    "dificultad",
    "ingredientes",
    "pasos",
    "tags"
  ],
  "additionalProperties": false
}
